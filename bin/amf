#!/usr/bin/env ruby

# amo fabula

require './commentarius.rb'

def jacioExceptio(i)
  if(ARGV.size < i+1)
    #      argument size   must   be more than
    abort "ARGV.quantitas dehibeo est ultra #{i}"
  end
end

jacioExceptio(0)
# > [scribo vel lego]
$actio = ARGV[0]

$commentarium_scribo = ["write", "scribo"]
$commentarium_lego = ["read", "lego"]


def efficio_commentarium()
   args = Array.new
   (1..ARGV.size-1).each { |i|
     args.push ARGV[i]
   }
   securis = ARGV[1]

   if habeoActio([$commentarium_scribo])
     Commentarius.scribo securis, args
   elsif habeoActio([$commentarium_lego])
     Commentarius.lego_tamquam_console securis
   else
     abort "#{$actio} invalid."
   end

end

def habeoActio(arrays)
  habeo = false
  arrays.each { |array|
    if array.include? $actio
      habeo = true
    end
  }
  habeo
end

if habeoActio([$commentarium_scribo, $commentarium_lego])
   efficio_commentarium
end

